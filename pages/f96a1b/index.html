<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>react里运用的的设计模式 | 努力写bug的王路飞</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/helloyifee.github.io/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/helloyifee.github.io/assets/css/0.styles.bba5b63a.css" as="style"><link rel="preload" href="/helloyifee.github.io/assets/js/app.e3066f50.js" as="script"><link rel="preload" href="/helloyifee.github.io/assets/js/2.6d47b19a.js" as="script"><link rel="preload" href="/helloyifee.github.io/assets/js/14.2ba48169.js" as="script"><link rel="prefetch" href="/helloyifee.github.io/assets/js/10.c7289134.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/100.5d266b12.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/101.cd5ba48f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/102.79023d67.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/103.362d222e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/104.7ff9129d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/105.884c0943.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/106.aa152a5d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/107.55220385.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/108.bc74e490.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/109.3a5e2d6c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/11.71ebb535.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/110.6e0915bc.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/111.24f742bd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/112.c30b2cbb.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/113.a3f1b2de.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/114.963fec18.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/115.cffeee9a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/116.31116c25.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/117.20ad2f5f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/118.1ba6666e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/119.343b4ad1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/12.4c319989.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/120.787d3c19.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/121.4934f2ae.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/122.1b37c891.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/123.5cdb0499.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/124.ca10e77a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/125.2ae89a9c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/126.123da271.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/127.a9d39e3f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/128.f199bcb5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/129.8a0c62a7.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/13.605c93fa.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/130.3ce5980d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/131.02c9455b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/132.09c72669.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/133.7504578c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/134.80685deb.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/135.7ce05046.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/136.5873764d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/137.659a1ad2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/138.67248301.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/139.e650953b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/140.358d9fb3.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/141.1936a7a5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/142.51cf6d16.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/143.708186ce.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/144.e45f9581.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/145.86907d1f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/146.c3a01545.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/147.da857908.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/148.f5ee5a88.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/149.561c11bd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/15.14dffa24.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/150.f54b924b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/151.6a6b607f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/152.6cbbba87.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/153.30b878b6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/154.9eadbcc1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/155.28d5efa5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/156.366e7c25.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/157.a8d7de02.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/158.9fa5e602.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/16.6505ef76.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/17.14367193.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/18.4aee3371.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/19.add2d39f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/20.307bc666.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/21.f0ac5fc7.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/22.4ddc8bff.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/23.8820010d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/24.1e4adb7c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/25.b134813d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/26.4b199490.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/27.744d2a9d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/28.83f560b0.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/29.3ca5706e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/3.d1a9cd9b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/30.24cf8cdd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/31.66443282.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/32.cc52a2bc.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/33.97b68ef3.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/34.93d4485b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/35.de88a8b2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/36.d0fb9634.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/37.4f8fc583.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/38.7f2fc124.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/39.afbf455d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/4.8f7f623d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/40.e3738d8b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/41.f7bdaa7a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/42.9b73e330.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/43.34085b30.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/44.0d049fe1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/45.9ac31bac.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/46.4f862f59.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/47.946c22cf.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/48.63db1686.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/49.9c4632c1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/5.32b38534.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/50.aa9bb95d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/51.07b9ff91.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/52.c2e1c736.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/53.22249e0f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/54.99b8edaa.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/55.048aa30c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/56.f68f3711.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/57.c8d1edee.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/58.bd0969fd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/59.d7d24b04.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/6.246e2722.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/60.3abe1b9b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/61.4e5d0f5b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/62.67fba11a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/63.7f253f72.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/64.4643c745.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/65.f1f33929.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/66.0b0b9ead.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/67.616a93b6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/68.eb701a29.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/69.00bfb046.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/7.c0469e4d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/70.356c9477.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/71.5f47aa3d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/72.828aaac6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/73.fcdb23f8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/74.37195d07.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/75.65471960.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/76.c7bf3cc1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/77.eaf15958.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/78.a8ec709f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/79.39501aea.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/8.46e0fea8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/80.a3d3110e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/81.958988d6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/82.18cba5a8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/83.847aad68.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/84.0641f8e5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/85.42da64d6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/86.f7046475.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/87.a8422e6a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/88.23ee3991.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/89.eae37eb0.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/9.bb18d8e2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/90.3469ee71.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/91.5bc4f5c2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/92.eb78547f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/93.0fa56658.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/94.789d3f5c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/95.35d290ba.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/96.513953e8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/97.49c6ac2d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/98.d60788b4.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/99.7aaedd35.js">
    <link rel="stylesheet" href="/helloyifee.github.io/assets/css/0.styles.bba5b63a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/helloyifee.github.io/" class="home-link router-link-active"><img src="/helloyifee.github.io/img/logo.png" alt="努力写bug的王路飞" class="logo"> <span class="site-name can-hide">努力写bug的王路飞</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/helloyifee.github.io/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/helloyifee.github.io/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/0a83b083bdf257cb/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/c846e1/" class="nav-link">奇妙的CSS</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ddba10/" class="nav-link">前端动画</a></li></ul></li><li class="dropdown-item"><h4>react</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f80a3e/" class="nav-link">dumi从0设计ui库</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/e9e138/" class="nav-link">hooks里多个倒计时处理</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f96a1b/" aria-current="page" class="nav-link router-link-exact-active router-link-active">react里运用的的设计模式</a></li></ul></li><li class="dropdown-item"><h4>vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ad85d7/" class="nav-link">vue3学习笔记</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a9a286/" class="nav-link">开发避坑笔记</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/81145b/" class="nav-link">ajax封装(并发，优先级，锁等相关实现)</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/b35a81/" class="nav-link">javaScript常用设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/4643cd/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/90fd45/" class="nav-link">ESLint + stylelint + husky + Lint-staged + commitlint：统一前端代码规范</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">TypeScript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="link-title">工程化</a> <span class="title" style="display:none;">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/f43700/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/41f87d890d0a02af/" class="nav-link">部署上线</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/c5c1ef/" class="nav-link">http相关</a></li><li class="dropdown-item"><h4>前端工程化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/17152a/" class="nav-link">打包工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/569563/" class="nav-link">包管理工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a4f621/" class="nav-link">脚手架工具</a></li></ul></li><li class="dropdown-item"><h4>架构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/da72ce/" class="nav-link">1.后台管理系统实现页面多tab，右键菜单关闭、刷新等功能</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js/ts" class="dropdown-title"><a href="/helloyifee.github.io/pages/51afd6/" class="link-title">js/ts</a> <span class="title" style="display:none;">js/ts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9d6acf/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">ts</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/e05dce83e5129785/" class="nav-link">TypeScript 从零实现 axios</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便想想" class="dropdown-title"><a href="/helloyifee.github.io/pages/92ee22/" class="link-title">随便想想</a> <span class="title" style="display:none;">随便想想</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/61c915/" class="nav-link">对所有的烦恼说拜拜</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/92ee22/" class="nav-link">关于梦境</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/35c487/" class="nav-link">就这样普普通通的吧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/3b1614/" class="nav-link">忽然而已</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏夹" class="dropdown-title"><a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6" class="link-title">收藏夹</a> <span class="title" style="display:none;">收藏夹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/47cf96/" class="nav-link">常用前端轮子</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6.html" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/helloyifee.github.io/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/yifeewang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://20211222.oss-cn-beijing.aliyuncs.com/yifee.jpg"> <div class="blogger-info"><h3>努力写bug的王路飞</h3> <span>一个爱写bug的切图仔</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/helloyifee.github.io/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/helloyifee.github.io/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/0a83b083bdf257cb/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/c846e1/" class="nav-link">奇妙的CSS</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ddba10/" class="nav-link">前端动画</a></li></ul></li><li class="dropdown-item"><h4>react</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f80a3e/" class="nav-link">dumi从0设计ui库</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/e9e138/" class="nav-link">hooks里多个倒计时处理</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f96a1b/" aria-current="page" class="nav-link router-link-exact-active router-link-active">react里运用的的设计模式</a></li></ul></li><li class="dropdown-item"><h4>vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ad85d7/" class="nav-link">vue3学习笔记</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a9a286/" class="nav-link">开发避坑笔记</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/81145b/" class="nav-link">ajax封装(并发，优先级，锁等相关实现)</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/b35a81/" class="nav-link">javaScript常用设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/4643cd/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/90fd45/" class="nav-link">ESLint + stylelint + husky + Lint-staged + commitlint：统一前端代码规范</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">TypeScript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="link-title">工程化</a> <span class="title" style="display:none;">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/f43700/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/41f87d890d0a02af/" class="nav-link">部署上线</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/c5c1ef/" class="nav-link">http相关</a></li><li class="dropdown-item"><h4>前端工程化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/17152a/" class="nav-link">打包工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/569563/" class="nav-link">包管理工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a4f621/" class="nav-link">脚手架工具</a></li></ul></li><li class="dropdown-item"><h4>架构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/da72ce/" class="nav-link">1.后台管理系统实现页面多tab，右键菜单关闭、刷新等功能</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js/ts" class="dropdown-title"><a href="/helloyifee.github.io/pages/51afd6/" class="link-title">js/ts</a> <span class="title" style="display:none;">js/ts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9d6acf/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">ts</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/e05dce83e5129785/" class="nav-link">TypeScript 从零实现 axios</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便想想" class="dropdown-title"><a href="/helloyifee.github.io/pages/92ee22/" class="link-title">随便想想</a> <span class="title" style="display:none;">随便想想</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/61c915/" class="nav-link">对所有的烦恼说拜拜</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/92ee22/" class="nav-link">关于梦境</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/35c487/" class="nav-link">就这样普普通通的吧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/3b1614/" class="nav-link">忽然而已</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏夹" class="dropdown-title"><a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6" class="link-title">收藏夹</a> <span class="title" style="display:none;">收藏夹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/47cf96/" class="nav-link">常用前端轮子</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6.html" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/helloyifee.github.io/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/yifeewang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/helloyifee.github.io/pages/f80a3e/" class="sidebar-link">使用dumi开发ui库并发布npm</a></li><li><a href="/helloyifee.github.io/pages/e9e138/" class="sidebar-link">hooks里多个倒计时处理</a></li><li><a href="/helloyifee.github.io/pages/f96a1b/" aria-current="page" class="active sidebar-link">react里运用的的设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#一-组合模式" class="sidebar-link">一. 组合模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#组合模式的原理" class="sidebar-link">组合模式的原理</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#二-render-props模式" class="sidebar-link">二.render props模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#render-props的原理" class="sidebar-link">render props的原理</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#consumer" class="sidebar-link">Consumer</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#作用" class="sidebar-link">作用</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#总结-2" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#三-hoc-模式" class="sidebar-link">三.hoc 模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#hoc的原理" class="sidebar-link">Hoc的原理</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#hoc的功能" class="sidebar-link">HOC的功能</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#hoc-demo" class="sidebar-link">HOC demo</a></li></ul></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#四-提供者模式" class="sidebar-link">四.提供者模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#五-类组件继承" class="sidebar-link">五.类组件继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/f96a1b/#demo" class="sidebar-link">demo</a></li></ul></li></ul></li><li><a href="/helloyifee.github.io/pages/b784e9/" class="sidebar-link">函数组件ref使用</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>架构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ts笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/helloyifee.github.io/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/helloyifee.github.io/web" title="前端-目录页" data-v-1cd794fe>前端</a></li> <li data-v-1cd794fe><a href="/helloyifee.github.io/web/#React相关" title="前端#React相关" data-v-1cd794fe>React相关</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/yifeewang" target="_blank" title="作者" class="beLink" data-v-1cd794fe>yifeewang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-04-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          react里运用的的设计模式
        </h1>  <div class="theme-vdoing-content content__default"><p>首先我们想一个问题，那就是 为什么要学习设计模式？ 原因我总结有以下几个方面。</p> <blockquote><p>1 功能复杂，逻辑复用问题。</p></blockquote> <blockquote><p>2 培养设计能力，编程能力</p></blockquote> <p>这里重点介绍 React 的五种设计模式，分别是：</p> <blockquote><p>组合模式
render props模式
hoc 模式
提供者模式
类组件继承</p></blockquote> <h2 id="一-组合模式"><a href="#一-组合模式" class="header-anchor">#</a> 一. 组合模式</h2> <p>组合模式适合一些容器组件场景，通过外层组件包裹内层组件，这种方式在 Vue 中称为 slot 插槽，外层组件可以轻松的获取内层组件的 props 状态，还可以控制内层组件的渲染，组合模式能够直观反映出 父 -&gt; 子组件的包含关系，如下最简单的组合模式例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Tabs onChange<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TabItem name<span class="token operator">=</span><span class="token string">&quot;react&quot;</span>  label<span class="token operator">=</span><span class="token string">&quot;react&quot;</span> <span class="token operator">&gt;</span>React<span class="token operator">&lt;</span><span class="token operator">/</span>TabItem<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TabItem name<span class="token operator">=</span><span class="token string">&quot;vue&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;vue&quot;</span> <span class="token operator">&gt;</span>Vue<span class="token operator">&lt;</span><span class="token operator">/</span>TabItem<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TabItem name<span class="token operator">=</span><span class="token string">&quot;angular&quot;</span> label<span class="token operator">=</span><span class="token string">&quot;angular&quot;</span>  <span class="token operator">&gt;</span>Angular<span class="token operator">&lt;</span><span class="token operator">/</span>TabItem<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Tabs<span class="token operator">&gt;</span>
</code></pre></div><p>如上 Tabs 和 TabItem 组合，构成切换 tab 功能，那么 Tabs 和 TabItem 的分工如下：</p> <p>Tabs 负责展示和控制对应的 TabItem 。绑定切换 tab 回调方法 onChange。当 tab 切换的时候，执行回调。
TabItem 负责展示对应的 tab 项，向 Tabs 传递 props 相关信息。</p> <p>我们直观上看到 Tabs 和 TabItem 并没有做某种关联，但是却无形的联系起来。这种就是组合模式的精髓所在，这种组合模式的组件，给使用者感觉很舒服，因为大部分工作，都在开发组合组件的时候处理了。所以编写组合模式的嵌套组件，对锻炼开发者的 React 组件封装能力是很有帮助的。</p> <h3 id="组合模式的原理"><a href="#组合模式的原理" class="header-anchor">#</a> 组合模式的原理</h3> <p>首先介绍几点概念：
1.props.children
首先如果是组合模式的写法，子组件会被 jsx 编译成 React element， GroupPatternsItem 可以通过 GroupPatterns 的 props.children 访问到。
但是要注意：</p> <blockquote><p>针对单一节点的情况，props.children 就是一个对象结构</p></blockquote> <blockquote><p>针对多节点的情况，props.children 就是一个数组结构</p></blockquote> <blockquote><p>针对render props，props.children 就是一个函数</p></blockquote> <p>所以如果想要访问每一个的 props ，那么需要通过 React.Children.forEach 遍历 props.children。并且还需要对做出相应的判断：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">GroupPatterns</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>  React<span class="token punctuation">.</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
     <span class="token operator">?</span> props<span class="token punctuation">.</span>children
     <span class="token operator">:</span> <span class="token keyword">typeof</span> props<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">?</span>
       props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2.React.cloneElement
通过 React.cloneElement 隐式混入 props
这个是组合模式的精髓所在，就是可以通过 React.cloneElement 向 children 中混入其他的 props，那么子组件就可以使用容器父组件提供的特有的 props 。
我们看看以下例子：</p> <h4 id="_1-简单组合模式场景"><a href="#_1-简单组合模式场景" class="header-anchor">#</a> 1.简单组合模式场景</h4> <p>先看如下代码示例：</p> <p>1.控制渲染：</p> <blockquote><p>组合模式通过通过 Children.forEach 遍历 children ，然后通过对比 props ，选择需要渲染的 children</p></blockquote> <blockquote><p>通过 newChildren 存放满足要求的 React Element</p></blockquote> <blockquote><p>通过 isValidElement 排除非 element 节点, type.name表示 Item函数名，排除非 Item 元素</p></blockquote> <blockquote><p>获取 isShow 属性，只展示 isShow = true 的 Item，最终效果满足要求</p></blockquote> <p>2.身份识别</p> <blockquote><p>GroupPatterns 内部如果有多个组件，比如 Item组件，Text组件 。。。之类的, 那么如何证明 Item 或者 Text 组件呢。</p></blockquote> <blockquote><p>1.可以通过props.children.type.nam是否等于函数名。</p></blockquote> <blockquote><p>2.可以统一绑定静态属性 displayName 来标记组件的身份。Item.displayName='GroupPatternsItem', Text.displayName='GroupPatternsText'</p></blockquote> <p>3.内外层通信</p> <blockquote><p>组合模式可以轻松的实现内外层通信的场景，原理就是通过外层组件，向内层组件传递回调函数 callback ，内层通过调用 callback 来实现两层组合模式的通信关系。</p></blockquote> <blockquote><p>GroupPatterns 向 GroupPatternsItem 组件中隐式传入回调函数 callback，将作为新的 props 传递。</p></blockquote> <blockquote><p>GroupPatternsItem 可以通过调用 GroupPatterns 向 Groups传递信息。实现了内外层的通信。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// GroupPatterns.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>isValidElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">GroupPatterns</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' children 内容：'</span><span class="token punctuation">,</span>val <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> newChilren <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历children，根据属性处理每一项节点</span>
    React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">,</span>props <span class="token punctuation">}</span> <span class="token operator">=</span> item <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>isShow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">=</span> props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token comment">// 根据子组件属性是否展示</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'GroupPatternsItem'</span> <span class="token operator">&amp;&amp;</span> isShow  <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 或者 type.displayName === 'Item'</span>
            <span class="token comment">// 增强要展示的子组件，给元素添加额外props</span>
            <span class="token keyword">const</span> enhanceElement <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span> item <span class="token punctuation">,</span> <span class="token punctuation">{</span> callback<span class="token operator">:</span>handleCallback <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            newChilren<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>enhanceElement<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' React.newChildren'</span><span class="token punctuation">,</span> newChilren<span class="token punctuation">,</span> props<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
    <span class="token keyword">return</span> newChilren
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">GroupPatternsItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'GroupPatternsItem'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;《React进阶实践指南》&quot;, author: &quot;alien&quot;}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div 
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                display<span class="token operator">:</span> <span class="token string">'flex'</span><span class="token punctuation">,</span> 
                flexDirection<span class="token operator">:</span> <span class="token string">'column'</span><span class="token punctuation">,</span> 
                alignItems<span class="token operator">:</span> <span class="token string">'flex-start'</span><span class="token punctuation">,</span> 
                textAlign<span class="token operator">:</span><span class="token string">'left'</span><span class="token punctuation">,</span> 
                width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span> 
                marginBottom<span class="token operator">:</span> <span class="token string">'20px'</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token operator">&gt;</span> 
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    名称<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> props<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">let us learn </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
GroupPatternsItem<span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token string">'Item'</span>

<span class="token comment">// index.js</span>
<span class="token operator">&lt;</span>GroupPatterns<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem name<span class="token operator">=</span><span class="token string">'《React进阶实践指南》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem name<span class="token operator">=</span><span class="token string">'《React设计模式》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem isShow name<span class="token operator">=</span><span class="token string">'《React进阶实践指南》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem isShow<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">'《Nodejs深度学习手册》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span>world<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>GroupPatterns<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_2-复杂组合模式场景"><a href="#_2-复杂组合模式场景" class="header-anchor">#</a> 2.复杂组合模式场景</h4> <p>组合模式还有一种场景，在外层容器中，进行再次组合，这样组件就会一层一层的包裹，一次又一次的强化。这里举一个例子：
在 GroupPatterns 组件里通过 Wrap 再进行组合。经过两次组合第一层处理组件的展示，第二层把 author, desc 和 callback 混入到 props 中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// GroupPatterns.js</span>

<span class="token comment">// 这一层只处理组件的显示</span>
<span class="token keyword">const</span> <span class="token function-variable function">GroupPatterns</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> newChilren <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历children，根据属性处理每一项节点</span>
    React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">,</span>props <span class="token punctuation">}</span> <span class="token operator">=</span> item <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>isShow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">=</span> props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token comment">// 根据子组件属性是否展示</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'GroupPatternsItem'</span> <span class="token operator">&amp;&amp;</span> isShow  <span class="token punctuation">)</span><span class="token punctuation">{</span>
            newChilren<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Wrap<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>newChilren<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Wrap<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这一层增强混入其他属性</span>
<span class="token keyword">function</span> <span class="token function">Wrap</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' children 内容：'</span><span class="token punctuation">,</span>val <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> newChilren <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> enhanceElement <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span>
            item <span class="token punctuation">,</span> 
            <span class="token punctuation">{</span> 
                callback<span class="token operator">:</span> handleCallback<span class="token punctuation">,</span> 
                author<span class="token operator">:</span> <span class="token string">'wyf'</span><span class="token punctuation">,</span> 
                desc<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">let us learn </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
        newChilren<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>enhanceElement<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> newChilren
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">GroupPatternsItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div 
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                display<span class="token operator">:</span> <span class="token string">'flex'</span><span class="token punctuation">,</span> 
                flexDirection<span class="token operator">:</span> <span class="token string">'column'</span><span class="token punctuation">,</span> 
                alignItems<span class="token operator">:</span> <span class="token string">'flex-start'</span><span class="token punctuation">,</span> 
                textAlign<span class="token operator">:</span><span class="token string">'left'</span><span class="token punctuation">,</span> 
                width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
                marginBottom<span class="token operator">:</span> <span class="token string">'20px'</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> 
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    名称<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> props<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">let us learn </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>作者<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>author<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>对大家说<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>desc<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// index.js</span>
<span class="token operator">&lt;</span>GroupPatterns<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem name<span class="token operator">=</span><span class="token string">'《React进阶实践指南》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem name<span class="token operator">=</span><span class="token string">'《React设计模式》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem isShow name<span class="token operator">=</span><span class="token string">'《React进阶实践指南》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem isShow<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">'《Nodejs深度学习手册》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span>world<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>GroupPatterns<span class="token operator">&gt;</span>

</code></pre></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>这种组合模式能够一层层强化原始组件，外层组件不用过多关心内层到底做了些什么? 只需要处理 children 就可以，同样内层 children 在接受业务层的 props 外，还能使用来自外层容器组件的状态，方法等。</p> <p>组合模式通过外层组件获取内层组件 children ，通过 cloneElement 传入新的状态，或者控制内层组件渲染。
组合模式还可以和其他组件组合，或者是 render props，拓展性很强，实现的功能强大。</p> <h2 id="二-render-props模式"><a href="#二-render-props模式" class="header-anchor">#</a> 二.render props模式</h2> <p>render props 模式和组合模式类似。区别不同的是，用函数的形式代替 children。函数的参数，由容器组件提供，这样的好处，将容器组件的状态，提升到当前外层组件中，这个是一个巧妙之处，也是和组合模式相比最大的区别。</p> <h3 id="render-props的原理"><a href="#render-props的原理" class="header-anchor">#</a> render props的原理</h3> <p>render props这种模式适合一种，容器包装，状态的获取。react中 context 中的 Consumer。就采用 render props 模式。
如下：
cProps 为 Container 组件提供的状态。
aProps 为 App 提供的状态。
这种模式优点是，能够给 App 的子组件 Container 的状态提升到 App 的 render 函数中。
然后可以组合成新的 props，传递给 Children，这种方式让容器化的感念更显而易见。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//RenderProps.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Container</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Container'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'wyf'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token string">'18'</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Children</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Children'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>name<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>age<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>book<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>book<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
    Children<span class="token punctuation">,</span>
    Container
<span class="token punctuation">}</span>


<span class="token comment">// index.js</span>
<span class="token keyword">const</span> aProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    book<span class="token operator">:</span><span class="token string">'《React render props》'</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>Container<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token parameter">cProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Children <span class="token punctuation">{</span><span class="token operator">...</span>cProps<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>aProps<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">&gt;</span>
</code></pre></div><h3 id="consumer"><a href="#consumer" class="header-anchor">#</a> Consumer</h3> <p>我们看到 Consumer 就是一个容器组件，包装即将渲染的内容，然后通过 children render 函数执行把状态 contextValue 从上游向下游提取。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Context <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
           <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">contextValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
               名称：<span class="token punctuation">{</span>contextValue<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
               年龄：<span class="token punctuation">{</span>contextValue<span class="token punctuation">.</span>age<span class="token punctuation">}</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span>
         <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span><span class="token string">'wyf'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span><span class="token string">'18'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Context<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Context<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h3> <blockquote><p>1.派生新状态
相比传统的组合模式，render props 还有一个就是灵活性，可以通过容器组件的状态和当前组件的状态结合，派生出新的状态。比如如下</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>Container<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">cProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span>  <span class="token keyword">const</span> nProps <span class="token operator">=</span>  <span class="token function">getNewProps</span><span class="token punctuation">(</span> aProps <span class="token punctuation">,</span> cProps <span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>Children <span class="token punctuation">{</span><span class="token operator">...</span>nProps<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>Container<span class="token operator">&gt;</span>
 <span class="token comment">//nProps 是通过当前组件的状态 aProps 和 Container 容器组件 cProps ，合并计算得到的状态。</span>
</code></pre></div><blockquote><p>2.反向状态回传
这种情况比较极端，就是可以通过 render props 中的状态，提升到当前组件中，也就是把容器组件内的状态，传递给父组件。比如如下情况。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">GetContanier</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> dom <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">getDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  dom<span class="token punctuation">.</span>current
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>dom<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">{</span> getDom <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token comment">/* 保存 render props 回传的状态 */</span>
     <span class="token keyword">const</span> getChildren <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
     <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> childDom <span class="token operator">=</span> getChildren<span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> childDom<span class="token punctuation">,</span><span class="token string">'childDom'</span> <span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>GetContanier<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>getDom<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            getChildren<span class="token punctuation">.</span>current <span class="token operator">=</span> getDom
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>GetContanier<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>这是一个复杂的状态回传的场景，在 GetContanier 将获取元素的方法 getDom 通过 render props 回传给父组件。</p> <p>父组件 App 通过 getChildren 保存 render props 回传的内容，在 useEffect 调用 getDom 方法</p> <p>真实情景下，回传的内容可能更加复杂.</p> <h3 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h3> <p>1.容器组件作用是传递状态，执行 children 函数。
2.外层组件可以根据容器组件回传 props ，进行 props 组合传递给子组件。
3.外层组件可以使用容器组件回传状态。</p> <h2 id="三-hoc-模式"><a href="#三-hoc-模式" class="header-anchor">#</a> 三.hoc 模式</h2> <p>hoc 高阶组件模式也是 React 比较常用的一种包装强化模式之一
高阶函数是接收一个函数，返回一个函数。而所谓高阶组件，就是接收一个组件，返回一个组件，返回的组件是根据需要对原始组件的强化。</p> <h3 id="hoc的原理"><a href="#hoc的原理" class="header-anchor">#</a> Hoc的原理</h3> <p>hoc 的实现有两种方式，属性代理 和 反向继承。</p> <h4 id="_1-属性代理"><a href="#_1-属性代理" class="header-anchor">#</a> 1.属性代理</h4> <p>所谓正向属性代理，就是用组件包裹一层代理组件，在代理组件上，我们可以做一些，对源组件的代理操作。
我们可以理解为父子组件关系，父组件对子组件进行一系列强化操作。而 hoc 本身就是返回强化子组件的父组件。</p> <p>如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//HOC 本质是一个函数，传入 Component ，也就是原始组件本身</span>
<span class="token keyword">function</span> <span class="token function">Hoc</span> <span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//返回一个新的包装的组件 Wrap ，我们可以在 Wrap 中做一些强化原始组件的事。</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Wrap</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token comment">//---------</span>
        <span class="token comment">// 强化操作</span>
        <span class="token comment">//---------</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Wrap 中挂载原始组件本身 Component。</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//</span>
</code></pre></div><p>可以看出属性代理特点：</p> <blockquote><p>1.同样适用于 class 声明组件，和 function 声明的组件。</p></blockquote> <blockquote><p>2.可以嵌套使用，多个 hoc 是可以嵌套使用的，而且一般不会限制包装HOC的先后顺序。</p></blockquote> <blockquote><p>3.可以完全隔离业务组件的渲染,相比反向继承，属性代理这种模式。可以完全控制业务组件渲染与否，可以避免反向继承带来一些副作用，比如生命周期的执行。</p></blockquote> <blockquote><p>4.正常属性代理可以和业务组件低耦合，零耦合，对于条件渲染和 props 属性增强,只负责控制子组件渲染和传递额外的 props 就可以，所以无须知道，业务组件做了些什么。所以正向属性代理，更适合做一些开源项目的 hoc ，目前开源的 HOC 基本都是通过这个模式实现的。</p></blockquote> <h4 id="_2-反向继承"><a href="#_2-反向继承" class="header-anchor">#</a> 2.反向继承</h4> <p>反向继承和属性代理有一定的区别，在于包装后的组件继承了业务组件本身，所以我们我无须再去实例化我们的业务组件。
当前高阶组件就是继承后，加强型的业务组件。这种方式类似于组件的强化，所以你必须要知道当前继承的组件的状态，内部做了些什么？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello<span class="token punctuation">,</span>world  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">HOC</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">wrapComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span> <span class="token comment">/* 直接继承需要包装的组件 */</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">HOC</span><span class="token punctuation">(</span>Index<span class="token punctuation">)</span> 

</code></pre></div><p>可以看出反向继承特点：</p> <blockquote><p>方便获取组件内部状态，比如state，props ,生命周期,绑定的事件函数等</p></blockquote> <blockquote><p>es6继承可以良好继承静态属性。我们无须对静态属性和方法进行额外的处理。</p></blockquote> <p>缺点：
① 无状态组件无法使用。
② 和被包装的组件强耦合，需要知道被包装的组件的内部状态，具体是做什么？
③ 如果多个反向继承hoc嵌套在一起，当前状态会覆盖上一个状态。这样带来的隐患是非常大的，比如说有多个componentDidMount，当前componentDidMount会覆盖上一个componentDidMount。这样副作用串联起来，影响很大。</p> <h3 id="hoc的功能"><a href="#hoc的功能" class="header-anchor">#</a> HOC的功能</h3> <p>1.对于属性代理HOC，我们可以：
强化props &amp; 抽离state。
条件渲染，控制渲染，分片渲染，懒加载。
劫持事件和生命周期。
ref控制组件实例。
添加事件监听器，日志</p> <p>2.对于反向代理的HOC,我们可以：
劫持渲染，操纵渲染树。
控制/替换生命周期，直接获取组件状态，绑定事件。</p> <h3 id="hoc-demo"><a href="#hoc-demo" class="header-anchor">#</a> HOC demo</h3> <p>场景：控制组件挂载的先后顺序，比如如下的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ComponentA <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ComponentB <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ComponentC <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如上，有三个子组件，ComponentA ，ComponentB，ComponentC，现在期望执行顺序是 ComponentA 渲染完成，挂载 ComponentB ，ComponentB 渲染完成，挂载 ComponentC，也就是三个组件是按照先后顺序渲染挂载的，那么如何实现呢？</p> <p>实际上，这种情况完全可以用一个 hoc 来实现，那么接下来实现这个场景。
首先这个 hoc 是针对当前 index 下面 的 ComponentA ｜ ComponentB ｜ ComponentC 一组 component 进行功能强化。所以这个 hoc 最好可以动态创建，而且服务于当前一组组件。那么可以声明一个生产 hoc 的函数工厂。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useEffect<span class="token punctuation">,</span> useState<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">createHoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> renderQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">/* 待渲染队列 */</span>
    <span class="token keyword">let</span> isFirstRender <span class="token operator">=</span> <span class="token boolean">true</span>      <span class="token comment">/* 是否是队列中的第一个挂载任务 */</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">Hoc</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">function</span> <span class="token function">RenderController</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">/* RenderController 用于真正挂载原始组件  */</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> renderNextComponent <span class="token punctuation">,</span><span class="token operator">...</span>otherprops  <span class="token punctuation">}</span> <span class="token operator">=</span> props
            <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>              <span class="token comment">/* useEffect 和 componentDidMount 在组件渲染完成后才会执行 */</span>
                <span class="token function">renderNextComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">/* 通知执行下一个需要挂载的组件任务 */</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component  <span class="token punctuation">{</span><span class="token operator">...</span>otherprops<span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 借用 Wrap 的isRender state去控制对应组件的渲染</span>
        <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Wrap</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
                    isRender<span class="token operator">:</span><span class="token boolean">false</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token function-variable function">renderNextComponent</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  <span class="token comment">/* 从更新队列中，取出下一个任务，进行挂载 */</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>renderQueue<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">// console.log('22222 挂载下一个组件', this.props.name, [...renderQueue])</span>
                    <span class="token keyword">const</span> nextRender <span class="token operator">=</span> renderQueue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token comment">// ****** 特别注意 *********</span>
                    <span class="token comment">// 若待渲染队列 renderQueue 被清空，则需要重置 isFirstRender，否则会导致后续显示组件 D, E 无效</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>renderQueue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        isFirstRender <span class="token operator">=</span> <span class="token boolean">true</span>
                    <span class="token punctuation">}</span>
                    nextRender<span class="token punctuation">.</span><span class="token function">tryRender</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
                <span class="token comment">// console.log(11111,  this.props.name)</span>
                <span class="token keyword">const</span> <span class="token function-variable function">tryRender</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
                    <span class="token comment">// console.log('333 tryRender', this.props.name)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        isRender<span class="token operator">:</span><span class="token boolean">true</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                tryRender<span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name
                renderQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    tryRender<span class="token punctuation">,</span>
                    name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                 <span class="token comment">/* 如果是第一个挂载任务，那么需要 立即执行 renderNextComponent， 后续只有当前组件渲染结束才会 调用 renderNextComponent */</span>
                isFirstRender <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderNextComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                isFirstRender <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">const</span> <span class="token punctuation">{</span> isRender <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
                <span class="token keyword">return</span> isRender <span class="token operator">?</span> <span class="token operator">&lt;</span>RenderController <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> renderNextComponent<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>renderNextComponent<span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>div <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> createHoc<span class="token punctuation">;</span>
</code></pre></div><p>首先通过 createHoc 来创建需要顺序加载的 hoc ，renderQueue 存放待渲染的队列。
Hoc 接收原始组件 Component。
RenderController 用于真正挂载原始组件，用 useEffect 通知执行下一个需要挂载的组件任务，在 hooks 原理的文章中，我讲过 useEffect 采用异步执行，也就是说明，是在渲染之后，浏览器绘制已经完成。
Wrap 组件包装了一层 RenderController，主要用于渲染更新任务，isFirstRender 证明是否是队列中的第一个挂载任务，如果是第一个挂载任务，那么需要在 componentDidMount 开始挂载第一个组件。
每一个挂载任务本质上就是 tryRender 方法，里面调用了 setState 来渲染 RenderController。
每一个挂载任务的函数 renderNextComponent 原理很简单，就是获取第一个更新任务，然后执行就可以了。
还有一些细节没有处理，比如说继承静态属性，ref 转发等。</p> <p>使用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 创建 hoc  */</span>
<span class="token keyword">const</span> loadingHoc <span class="token operator">=</span> <span class="token function">createHoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">CompA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件A'</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件A挂载完成'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>组件 <span class="token constant">A</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">CompB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件B'</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件B挂载完成'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>组件 <span class="token constant">B</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">CompC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件C'</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件C挂载完成'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>组件 <span class="token constant">C</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">CompD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件D'</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件D挂载完成'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>组件 <span class="token constant">D</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">CompE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件E'</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'组件E挂载完成'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>组件 <span class="token constant">E</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> ComponentA <span class="token operator">=</span> <span class="token function">loadingHoc</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>CompA<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ComponentB <span class="token operator">=</span> <span class="token function">loadingHoc</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>CompB<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ComponentC <span class="token operator">=</span> <span class="token function">loadingHoc</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>CompC<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ComponentD <span class="token operator">=</span> <span class="token function">loadingHoc</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>CompD<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ComponentE <span class="token operator">=</span> <span class="token function">loadingHoc</span><span class="token punctuation">(</span>React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>CompE<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> isShow<span class="token punctuation">,</span> setIsShow <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ComponentA <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ComponentB <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ComponentC <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>isShow <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>ComponentD <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>isShow <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>ComponentE <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">setIsShow</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span> 挂载组件<span class="token constant">D</span> ，<span class="token constant">E</span> <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="四-提供者模式"><a href="#四-提供者模式" class="header-anchor">#</a> 四.提供者模式</h2> <p>在 React 的项目中如果有一个全局变量，需要在各个不同的ui组件中去使用，来做对应的视图渲染。那么如何合理的把这个全局变量给传递下去，合理分配呢？</p> <p>很明显 props 解决不了这个问题，因为 props 需要通过层层绑定，而且还要考虑 pureComponent， memo 策略的影响。</p> <p>所以这个时候用提供者模式最好不过了。React 提供了 context ‘提供者’模式。</p> <p>具体模式是这样的，React组件树 Root 节点，用 Provider 提供者注入 变量，然后在需要 使用的的 地方，用 Consumer 消费者形式取出theme，供给组件渲染使用即可，这样减少很多无用功。用官网上的一句话形容就是Context 提供了一个无需为每层组件手动添加 props，就能在组件树间进行数据传递的方法。</p> <p>但是必须注意一点是，提供者永远要在消费者上层。</p> <p>那么接下来介绍一下具体如何使用，首先开发者需要用 createContext api 创建一个 context。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>下面是Provider 和 Consumer的实现。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ThemeProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> theme <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token operator">:</span><span class="token string">'pink'</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span> theme <span class="token punctuation">}</span> <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过 ThemeContext 上的 Provider 传递主题信息 theme 。
Index 是根部组件。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ThemeConsumer</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token parameter">theme</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">/* render children函数 */</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> color <span class="token punctuation">}</span> <span class="token operator">=</span> theme
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
           <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Consumer 采用的就是上述讲到的 render props 模式。
通过 Consumer 订阅 context 变化，context 变化， render children 函数重新执行。 render children 函数中第一个参数就是保存的 context 信息。
在新版消费者中，对于函数组件还有 useContext 自定义 hooks ，对于类组件有 contextType 静态属性。</p> <h2 id="五-类组件继承"><a href="#五-类组件继承" class="header-anchor">#</a> 五.类组件继承</h2> <blockquote><p>React 有十分强大的组合模式。我们推荐使用组合而非继承来实现组件间的代码重用</p></blockquote> <p>React 官方推荐用组合方式，而非继承方式。但是继承方式还是有很多应用场景的。</p> <p>在 class 组件盛行之后，我们可以通过继承的方式进一步的强化我们的组件。这种模式的好处在于，可以封装基础功能组件，然后根据需要去 extends 我们的基础组件，按需强化组件，但是值得注意的是，必须要对基础组件有足够的掌握，否则会造成一些列意想不到的情况发生。</p> <p>继承增强效果很优秀。它的优势如下：</p> <div class="language- extra-class"><pre><code>可以控制父类 render，还可以添加一些其他的渲染内容；
可以共享父类方法，还可以添加额外的方法和属性。
</code></pre></div><p>但是也有值得注意的地方，就是 state 和生命周期会被继承后的组件修改。</p> <h3 id="demo"><a href="#demo" class="header-anchor">#</a> demo</h3> <p>接下来我们实现一个继承功能，继承的组件就是耳熟能详的 React-Router 中的 Route 组件，强化它，使它变成可以受到权限的控制。</p> <p>当页面有权限，那么直接展示页面内容。
当页面没有权限，那么展示无权限页面。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Route <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

<span class="token keyword">const</span> RouterPermission <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">PRoute</span> <span class="token keyword">extends</span> <span class="token class-name">Route</span><span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextType <span class="token operator">=</span> RouterPermission  <span class="token comment">/* 使用 context */</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>arg<span class="token punctuation">)</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
        <span class="token comment">/* 如果有权限 */</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">)</span>
        <span class="token keyword">const</span> isPermiss <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token comment">/* 判断是否有权限 */</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>isPermiss<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/* 修改 render 函数，如果没有权限，重新渲染一个 Route ，ui 是无权限展示的内容  */</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">render</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token operator">&lt;</span>Route  <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span>   <span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>暂无权限<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">/* 模拟的有权限的路由列表 */</span>
    <span class="token keyword">const</span> permissionList <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'/extends/a'</span> <span class="token punctuation">,</span> <span class="token string">'/extends/b'</span>  <span class="token punctuation">]</span>
   <span class="token keyword">return</span>  <span class="token operator">&lt;</span>RouterPermission<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>permissionList<span class="token punctuation">}</span> <span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>Index <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>RouterPermission<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>在根组件传入权限路由。通过 context 模式，保存的是存在权限的路由列表。这里模拟为 /extends/a 和 /extends/b。
编写 PRoute 权限路由，继承 react-router-dom 中的 Route 组件。
PRoute 通过 contextType 消费指定的权限上下文 RouterPermission context 。
在 constructor 中进行判断，如果有权限，那么不用做任何处理，如果没有权限，那么重写 render 函数，用 Route 做一个展示容器，展示无权限的 UI 。</p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/yifeewang/vuepress-theme-vdoing/edit/master/docs/01.前端/1.React相关/03.react里运用的的设计模式.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/04/23, 10:59:52</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/helloyifee.github.io/pages/e9e138/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">hooks里多个倒计时处理</div></a> <a href="/helloyifee.github.io/pages/b784e9/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">函数组件ref使用</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/helloyifee.github.io/pages/e9e138/" class="prev">hooks里多个倒计时处理</a></span> <span class="next"><a href="/helloyifee.github.io/pages/b784e9/">函数组件ref使用</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/helloyifee.github.io/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/helloyifee.github.io/pages/84f782/"><div>LRU算法实现</div></a> <span>05-01</span></dt></dl><dl><dd>02</dd> <dt><a href="/helloyifee.github.io/pages/3b1614/"><div>忽然而已</div></a> <span>04-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/helloyifee.github.io/pages/51f5cf/"><div>vueRouter原理</div></a> <span>04-05</span></dt></dl> <dl><dd></dd> <dt><a href="/helloyifee.github.io/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:896678534@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/yifeewang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>王路飞 | <a href="https://github.com/yifeewang" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/helloyifee.github.io/assets/js/app.e3066f50.js" defer></script><script src="/helloyifee.github.io/assets/js/2.6d47b19a.js" defer></script><script src="/helloyifee.github.io/assets/js/14.2ba48169.js" defer></script>
  </body>
</html>
