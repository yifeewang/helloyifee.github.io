<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>javaScript常用设计模式 | 努力写bug的王路飞</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/helloyifee.github.io/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/helloyifee.github.io/assets/css/0.styles.bba5b63a.css" as="style"><link rel="preload" href="/helloyifee.github.io/assets/js/app.e3066f50.js" as="script"><link rel="preload" href="/helloyifee.github.io/assets/js/2.6d47b19a.js" as="script"><link rel="preload" href="/helloyifee.github.io/assets/js/34.93d4485b.js" as="script"><link rel="preload" href="/helloyifee.github.io/assets/js/7.c0469e4d.js" as="script"><link rel="prefetch" href="/helloyifee.github.io/assets/js/10.c7289134.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/100.5d266b12.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/101.cd5ba48f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/102.79023d67.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/103.362d222e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/104.7ff9129d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/105.884c0943.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/106.aa152a5d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/107.55220385.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/108.bc74e490.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/109.3a5e2d6c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/11.71ebb535.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/110.6e0915bc.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/111.24f742bd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/112.c30b2cbb.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/113.a3f1b2de.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/114.963fec18.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/115.cffeee9a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/116.31116c25.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/117.20ad2f5f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/118.1ba6666e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/119.343b4ad1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/12.4c319989.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/120.787d3c19.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/121.4934f2ae.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/122.1b37c891.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/123.5cdb0499.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/124.ca10e77a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/125.2ae89a9c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/126.123da271.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/127.a9d39e3f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/128.f199bcb5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/129.8a0c62a7.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/13.605c93fa.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/130.3ce5980d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/131.02c9455b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/132.09c72669.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/133.7504578c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/134.80685deb.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/135.7ce05046.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/136.5873764d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/137.659a1ad2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/138.67248301.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/139.e650953b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/14.2ba48169.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/140.358d9fb3.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/141.1936a7a5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/142.51cf6d16.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/143.708186ce.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/144.e45f9581.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/145.86907d1f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/146.c3a01545.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/147.da857908.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/148.f5ee5a88.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/149.561c11bd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/15.14dffa24.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/150.f54b924b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/151.6a6b607f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/152.6cbbba87.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/153.30b878b6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/154.9eadbcc1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/155.28d5efa5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/156.366e7c25.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/157.a8d7de02.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/158.9fa5e602.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/16.6505ef76.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/17.14367193.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/18.4aee3371.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/19.add2d39f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/20.307bc666.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/21.f0ac5fc7.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/22.4ddc8bff.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/23.8820010d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/24.1e4adb7c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/25.b134813d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/26.4b199490.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/27.744d2a9d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/28.83f560b0.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/29.3ca5706e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/3.d1a9cd9b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/30.24cf8cdd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/31.66443282.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/32.cc52a2bc.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/33.97b68ef3.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/35.de88a8b2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/36.d0fb9634.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/37.4f8fc583.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/38.7f2fc124.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/39.afbf455d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/4.8f7f623d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/40.e3738d8b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/41.f7bdaa7a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/42.9b73e330.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/43.34085b30.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/44.0d049fe1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/45.9ac31bac.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/46.4f862f59.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/47.946c22cf.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/48.63db1686.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/49.9c4632c1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/5.32b38534.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/50.aa9bb95d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/51.07b9ff91.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/52.c2e1c736.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/53.22249e0f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/54.99b8edaa.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/55.048aa30c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/56.f68f3711.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/57.c8d1edee.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/58.bd0969fd.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/59.d7d24b04.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/6.246e2722.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/60.3abe1b9b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/61.4e5d0f5b.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/62.67fba11a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/63.7f253f72.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/64.4643c745.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/65.f1f33929.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/66.0b0b9ead.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/67.616a93b6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/68.eb701a29.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/69.00bfb046.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/70.356c9477.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/71.5f47aa3d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/72.828aaac6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/73.fcdb23f8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/74.37195d07.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/75.65471960.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/76.c7bf3cc1.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/77.eaf15958.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/78.a8ec709f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/79.39501aea.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/8.46e0fea8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/80.a3d3110e.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/81.958988d6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/82.18cba5a8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/83.847aad68.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/84.0641f8e5.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/85.42da64d6.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/86.f7046475.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/87.a8422e6a.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/88.23ee3991.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/89.eae37eb0.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/9.bb18d8e2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/90.3469ee71.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/91.5bc4f5c2.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/92.eb78547f.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/93.0fa56658.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/94.789d3f5c.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/95.35d290ba.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/96.513953e8.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/97.49c6ac2d.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/98.d60788b4.js"><link rel="prefetch" href="/helloyifee.github.io/assets/js/99.7aaedd35.js">
    <link rel="stylesheet" href="/helloyifee.github.io/assets/css/0.styles.bba5b63a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/helloyifee.github.io/" class="home-link router-link-active"><img src="/helloyifee.github.io/img/logo.png" alt="努力写bug的王路飞" class="logo"> <span class="site-name can-hide">努力写bug的王路飞</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/helloyifee.github.io/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/helloyifee.github.io/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/0a83b083bdf257cb/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/c846e1/" class="nav-link">奇妙的CSS</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ddba10/" class="nav-link">前端动画</a></li></ul></li><li class="dropdown-item"><h4>react</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f80a3e/" class="nav-link">dumi从0设计ui库</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/e9e138/" class="nav-link">hooks里多个倒计时处理</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f96a1b/" class="nav-link">react里运用的的设计模式</a></li></ul></li><li class="dropdown-item"><h4>vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ad85d7/" class="nav-link">vue3学习笔记</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a9a286/" class="nav-link">开发避坑笔记</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/81145b/" class="nav-link">ajax封装(并发，优先级，锁等相关实现)</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/b35a81/" aria-current="page" class="nav-link router-link-exact-active router-link-active">javaScript常用设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/4643cd/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/90fd45/" class="nav-link">ESLint + stylelint + husky + Lint-staged + commitlint：统一前端代码规范</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">TypeScript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="link-title">工程化</a> <span class="title" style="display:none;">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/f43700/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/41f87d890d0a02af/" class="nav-link">部署上线</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/c5c1ef/" class="nav-link">http相关</a></li><li class="dropdown-item"><h4>前端工程化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/17152a/" class="nav-link">打包工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/569563/" class="nav-link">包管理工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a4f621/" class="nav-link">脚手架工具</a></li></ul></li><li class="dropdown-item"><h4>架构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/da72ce/" class="nav-link">1.后台管理系统实现页面多tab，右键菜单关闭、刷新等功能</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js/ts" class="dropdown-title"><a href="/helloyifee.github.io/pages/51afd6/" class="link-title">js/ts</a> <span class="title" style="display:none;">js/ts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9d6acf/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">ts</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/e05dce83e5129785/" class="nav-link">TypeScript 从零实现 axios</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便想想" class="dropdown-title"><a href="/helloyifee.github.io/pages/92ee22/" class="link-title">随便想想</a> <span class="title" style="display:none;">随便想想</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/61c915/" class="nav-link">对所有的烦恼说拜拜</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/92ee22/" class="nav-link">关于梦境</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/35c487/" class="nav-link">就这样普普通通的吧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/3b1614/" class="nav-link">忽然而已</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏夹" class="dropdown-title"><a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6" class="link-title">收藏夹</a> <span class="title" style="display:none;">收藏夹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/47cf96/" class="nav-link">常用前端轮子</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6.html" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/helloyifee.github.io/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/yifeewang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://20211222.oss-cn-beijing.aliyuncs.com/yifee.jpg"> <div class="blogger-info"><h3>努力写bug的王路飞</h3> <span>一个爱写bug的切图仔</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/helloyifee.github.io/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/helloyifee.github.io/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>页面相关</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/8309a5b876fc95e3/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/0a83b083bdf257cb/" class="nav-link">CSS基础</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/c846e1/" class="nav-link">奇妙的CSS</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ddba10/" class="nav-link">前端动画</a></li></ul></li><li class="dropdown-item"><h4>react</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f80a3e/" class="nav-link">dumi从0设计ui库</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/e9e138/" class="nav-link">hooks里多个倒计时处理</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/f96a1b/" class="nav-link">react里运用的的设计模式</a></li></ul></li><li class="dropdown-item"><h4>vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/ad85d7/" class="nav-link">vue3学习笔记</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a9a286/" class="nav-link">开发避坑笔记</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/81145b/" class="nav-link">ajax封装(并发，优先级，锁等相关实现)</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/b35a81/" aria-current="page" class="nav-link router-link-exact-active router-link-active">javaScript常用设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/4643cd/" class="nav-link">设计模式</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/90fd45/" class="nav-link">ESLint + stylelint + husky + Lint-staged + commitlint：统一前端代码规范</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">TypeScript</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化" class="dropdown-title"><a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="link-title">工程化</a> <span class="title" style="display:none;">工程化</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/f43700/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/41f87d890d0a02af/" class="nav-link">部署上线</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/c5c1ef/" class="nav-link">http相关</a></li><li class="dropdown-item"><h4>前端工程化</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/17152a/" class="nav-link">打包工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/569563/" class="nav-link">包管理工具</a></li><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/a4f621/" class="nav-link">脚手架工具</a></li></ul></li><li class="dropdown-item"><h4>架构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/helloyifee.github.io/pages/da72ce/" class="nav-link">1.后台管理系统实现页面多tab，右键菜单关闭、刷新等功能</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="js/ts" class="dropdown-title"><a href="/helloyifee.github.io/pages/51afd6/" class="link-title">js/ts</a> <span class="title" style="display:none;">js/ts</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/9d6acf/" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/51afd6/" class="nav-link">ts</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/e05dce83e5129785/" class="nav-link">TypeScript 从零实现 axios</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便想想" class="dropdown-title"><a href="/helloyifee.github.io/pages/92ee22/" class="link-title">随便想想</a> <span class="title" style="display:none;">随便想想</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/61c915/" class="nav-link">对所有的烦恼说拜拜</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/92ee22/" class="nav-link">关于梦境</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/35c487/" class="nav-link">就这样普普通通的吧</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/3b1614/" class="nav-link">忽然而已</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏夹" class="dropdown-title"><a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6" class="link-title">收藏夹</a> <span class="title" style="display:none;">收藏夹</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/47cf96/" class="nav-link">常用前端轮子</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/pages/beb6c0bd8a66cea6.html" class="nav-link">网站</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/helloyifee.github.io/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/helloyifee.github.io/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/yifeewang/vuepress-theme-vdoing" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript文章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>学习笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/helloyifee.github.io/pages/90fd45/" class="sidebar-link">ESLint + stylelint + husky + Lint-staged + commitlint：统一前端代码规范</a></li><li><a href="/helloyifee.github.io/pages/81145b/" class="sidebar-link">ajax封装(并发，优先级，锁等相关实现)</a></li><li><a href="/helloyifee.github.io/pages/a9a286/" class="sidebar-link">开发避坑笔记</a></li><li><a href="/helloyifee.github.io/pages/ca9b86/" class="sidebar-link">软链接和硬链接到底有啥作用和区别</a></li><li><a href="/helloyifee.github.io/pages/b35a81/" aria-current="page" class="active sidebar-link">javaScript常用设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_1-什么是设计模式" class="sidebar-link">1.什么是设计模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_2-为什么使用设计模式" class="sidebar-link">2.为什么使用设计模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_3-设计模式的基本准则" class="sidebar-link">3.设计模式的基本准则</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_4-设计模式的种类" class="sidebar-link">4.设计模式的种类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#a-创建型模式" class="sidebar-link">a.创建型模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#b-结构型模式" class="sidebar-link">b.结构型模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#c-行为型模式" class="sidebar-link">c.行为型模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_5-前端比较常用的设计模式" class="sidebar-link">5.前端比较常用的设计模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_1-组合模式" class="sidebar-link">1.组合模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_2-单例模式" class="sidebar-link">2.单例模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_3-工厂模式" class="sidebar-link">3.工厂模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_4-原型模式" class="sidebar-link">4.原型模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_5-观察者模式" class="sidebar-link">5.观察者模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_6-策略模式" class="sidebar-link">6.策略模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_7-装饰器模式" class="sidebar-link">7.装饰器模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_8-代理模式" class="sidebar-link">8.代理模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_9-外观模式" class="sidebar-link">9.外观模式</a></li><li class="sidebar-sub-header"><a href="/helloyifee.github.io/pages/b35a81/#_10-迭代器模式" class="sidebar-link">10.迭代器模式</a></li></ul></li></ul></li><li><a href="/helloyifee.github.io/pages/bd5791/" class="sidebar-link">原生拖拽实现</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>架构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ts笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/helloyifee.github.io/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/helloyifee.github.io/web" title="前端-目录页" data-v-1cd794fe>前端</a></li> <li data-v-1cd794fe><a href="/helloyifee.github.io/web/#学习笔记" title="前端#学习笔记" data-v-1cd794fe>学习笔记</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/yifeewang" target="_blank" title="作者" class="beLink" data-v-1cd794fe>yifeewang</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2022-04-22</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          javaScript常用设计模式
        </h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-什么是设计模式"><a href="#_1-什么是设计模式" class="header-anchor">#</a> 1.什么是设计模式</h2> <p>通俗来讲，就是日常使用设计的一种惯性思维。
因为对应的这种思维，以及对具体的业务或者代码场景，
有着具体的优势，而后成为行业中的一种“设计模式”。</p> <h2 id="_2-为什么使用设计模式"><a href="#_2-为什么使用设计模式" class="header-anchor">#</a> 2.为什么使用设计模式</h2> <p>设计模式是各种业务场景的最佳实践，有助于我们在写日常业务中时，提高自身的思路。例如单例模式，就可以用于登陆框，模态框等场景。每种设计模式，必然有其适合应用的场景，灵活运用设计模式，可以提高代码的可维护性，还可提升自身思维能力。</p> <h2 id="_3-设计模式的基本准则"><a href="#_3-设计模式的基本准则" class="header-anchor">#</a> 3.设计模式的基本准则</h2> <blockquote><p>优化代码第一步：单一职责原则</p></blockquote> <blockquote><p>让程序更稳定更灵活：开闭原则</p></blockquote> <blockquote><p>构建扩展性更好的系统：里式替换原则</p></blockquote> <blockquote><p>让项目拥有变化的能力：依赖倒置原则</p></blockquote> <blockquote><p>系统有更高的灵活性：接口隔离原则</p></blockquote> <blockquote><p>更好地扩展性：迪米特原则</p></blockquote> <h2 id="_4-设计模式的种类"><a href="#_4-设计模式的种类" class="header-anchor">#</a> 4.设计模式的种类</h2> <h3 id="a-创建型模式"><a href="#a-创建型模式" class="header-anchor">#</a> a.创建型模式</h3> <p>一般用于创建对象。包括：
单例模式,工厂方法模式,抽象工厂模式,建造者模式,原型模式。</p> <h3 id="b-结构型模式"><a href="#b-结构型模式" class="header-anchor">#</a> b.结构型模式</h3> <p>重点为“继承”关系，有着一层继承关系，且一般都有“代理”。
包括：适配器模式,桥接模式,组合模式,装饰器模式,
外观模式,享元模式,代理模式,过滤器模式</p> <h3 id="c-行为型模式"><a href="#c-行为型模式" class="header-anchor">#</a> c.行为型模式</h3> <p>职责的划分，各自为政，减少外部的干扰。
包括：命令模式，解释器模式，迭代器模式，中介者模式，
备忘录模式，观察者模式，状态模式，策略模式，
模板方法模式，访问者模式，责任链模式</p> <h2 id="_5-前端比较常用的设计模式"><a href="#_5-前端比较常用的设计模式" class="header-anchor">#</a> 5.前端比较常用的设计模式</h2> <h3 id="_1-组合模式"><a href="#_1-组合模式" class="header-anchor">#</a> 1.组合模式</h3> <p>定义：将对象组合成树形结构以表示“部分-整体”的层次结构。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Folder</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fileName <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Folder:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> child <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            child<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">File</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fileName <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;File:&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> folder1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Folder</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
folder1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
folder1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> folder2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Folder</span><span class="token punctuation">(</span><span class="token string">&quot;secend&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
folder2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;file3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
folder1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>folder2<span class="token punctuation">)</span><span class="token punctuation">;</span>

folder1<span class="token punctuation">.</span><span class="token function">scan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样，通过调用第一个文件夹的扫描方法就能调用所有子元素的扫描方法。</p> <h4 id="a-组合模式在组件开发中的应用"><a href="#a-组合模式在组件开发中的应用" class="header-anchor">#</a> a) 组合模式在组件开发中的应用：</h4> <p>组合模式适合一些容器组件场景，通过外层组件包裹内层组件，这种方式在 Vue 中称为 slot 插槽，在React中为props.children，外层组件可以轻松的获取内层组件的 props 状态，还可以统一控制内层组件的渲染，组合模式能够直观反映出 父 -&gt; 子组件的包含关系，如下最简单的组合模式例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>GroupPatterns<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem name<span class="token operator">=</span><span class="token string">'《React进阶实践指南》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem name<span class="token operator">=</span><span class="token string">'《React设计模式》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem isShow name<span class="token operator">=</span><span class="token string">'《React进阶实践指南》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>GroupPatternsItem isShow<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">'《Nodejs深度学习手册》'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span>world<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>GroupPatterns<span class="token operator">&gt;</span>
</code></pre></div><p>我们直观上看到 GroupPatterns 和 GroupPatternsItem 并没有做某种关联，但是却无形的联系起来。这种就是组合模式的精髓所在，这种组合模式的组件，给使用者感觉很舒服，因为大部分工作，都在开发组合组件的时候处理了。所以编写组合模式的嵌套组件，对锻炼开发者的 组件封装能力是很有帮助的。</p> <p>我们通过如下代码分析组合模式原理：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// GroupPatterns.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>isValidElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">GroupPatterns</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleCallback</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' children 内容：'</span><span class="token punctuation">,</span>val <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> newChilren <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 遍历children，根据属性处理每一项节点</span>
    React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">,</span>props <span class="token punctuation">}</span> <span class="token operator">=</span> item <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>isShow <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">=</span> props <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token comment">// 根据子组件属性是否展示</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isValidElement</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> type<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'GroupPatternsItem'</span> <span class="token operator">&amp;&amp;</span> isShow  <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 或者 type.displayName === 'Item'</span>
            <span class="token comment">// 增强要展示的子组件，给元素添加额外props</span>
            <span class="token keyword">const</span> enhanceElement <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">cloneElement</span><span class="token punctuation">(</span> item <span class="token punctuation">,</span> <span class="token punctuation">{</span> callback<span class="token operator">:</span>handleCallback <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            newChilren<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>enhanceElement<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' React.newChildren'</span><span class="token punctuation">,</span> newChilren<span class="token punctuation">,</span> props<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
    <span class="token keyword">return</span> newChilren
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">GroupPatternsItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'GroupPatternsItem'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;《React进阶实践指南》&quot;, author: &quot;alien&quot;}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div 
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                display<span class="token operator">:</span> <span class="token string">'flex'</span><span class="token punctuation">,</span> 
                flexDirection<span class="token operator">:</span> <span class="token string">'column'</span><span class="token punctuation">,</span> 
                alignItems<span class="token operator">:</span> <span class="token string">'flex-start'</span><span class="token punctuation">,</span> 
                textAlign<span class="token operator">:</span><span class="token string">'left'</span><span class="token punctuation">,</span> 
                width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span> 
                marginBottom<span class="token operator">:</span> <span class="token string">'20px'</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token operator">&gt;</span> 
                <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                    名称<span class="token operator">:</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
                    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> props<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">let us learn </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span> 
           <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
GroupPatternsItem<span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token string">'Item'</span>
</code></pre></div><p>通过 React.cloneElement 隐式混入 props 这个是组合模式的精髓所在，就是可以通过 React.cloneElement 向 children 中混入其他的 props，那么子组件就可以使用容器父组件提供的特有的 props 。所以在外层容器中，进行多次组合，这样组件就会一层一层的包裹，一次又一次的强化。</p> <p>这种组合模式能够一层层强化原始组件，外层组件不用过多关心内层到底做了些什么? 只需要处理 children 就可以，同样内层 children 在接受业务层的 props 外，还能使用来自外层容器组件的状态，方法等。</p> <h3 id="_2-单例模式"><a href="#_2-单例模式" class="header-anchor">#</a> 2.单例模式</h3> <p>定义：保证一个类只有一个实例, 一般先判断实例是否存在,如果存在直接返回, 不存在则先创建再返回,这样就可以保证一个类只有一个实例对象.
作用：1.模块间通信。2.保证某个类的对象的唯一性3.防止变量污染
单例模式适用于全局只能有一个实例对象的场景，单例模式的一般结构如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> CreateSinglePattern <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> instance<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token keyword">return</span> instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">CreateSinglePattern</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>age
<span class="token punctuation">}</span>

<span class="token keyword">let</span> young <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateSinglePattern</span><span class="token punctuation">(</span><span class="token string">'18'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> old <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CreateSinglePattern</span><span class="token punctuation">(</span><span class="token string">'108'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>young <span class="token operator">===</span> old<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>young<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// '18'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// '18'</span>
</code></pre></div><p>通过闭包缓存实例，后续不管new多少次都是同一个实例。</p> <h4 id="a-单例模式在vuex中的应用"><a href="#a-单例模式在vuex中的应用" class="header-anchor">#</a> a) 单例模式在vuex中的应用：</h4> <p>对应的源码行数（vuex2 - - - 777行）
我们看看vuex的源码处理，在vue.use(vuex) 注册vuex的时候，会去调用vuex的install方法，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> Vue<span class="token punctuation">;</span> <span class="token comment">// bind on install</span>

<span class="token keyword">function</span> <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">_Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Vue <span class="token operator">&amp;&amp;</span> _Vue <span class="token operator">===</span> Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>
        <span class="token string">'[vuex] already installed. Vue.use(Vuex) should be called only once.'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  Vue <span class="token operator">=</span> _Vue<span class="token punctuation">;</span>
  <span class="token function">applyMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看出，如果重复注册的话会进行报错处理，通过这种方式，可以保证一个 Vue 实例（即一个 Vue 应用）只会被 install 一次 Vuex 插件，所以每个 Vue 实例只会拥有一个全局的 Store。</p> <h3 id="_3-工厂模式"><a href="#_3-工厂模式" class="header-anchor">#</a> 3.工厂模式</h3> <h4 id="a-简单工厂模式"><a href="#a-简单工厂模式" class="header-anchor">#</a> a.简单工厂模式</h4> <p>简单工厂模式是由一个工厂对象来创建某一类产品的实例。</p> <p>比如去买书，我们不用自己去找这些书，而是口头告诉给bookShop，让它帮我找，并且告诉我价格。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">bookShop</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> year<span class="token punctuation">,</span> version</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  book<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  book<span class="token punctuation">.</span>year <span class="token operator">=</span> year<span class="token punctuation">;</span>
  book<span class="token punctuation">.</span>version <span class="token operator">=</span> version<span class="token punctuation">;</span>
  book<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token string">'暂无标价'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'JS高级编程'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    book<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token string">'89'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'react进阶'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    book<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token string">'79'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'js设计模式'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    book<span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token string">'59'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> book<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> book1 <span class="token operator">=</span> <span class="token function">bookShop</span><span class="token punctuation">(</span><span class="token string">'JS高级编程'</span><span class="token punctuation">,</span> <span class="token string">'2013'</span><span class="token punctuation">,</span> <span class="token string">'第三版'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> book2 <span class="token operator">=</span> <span class="token function">bookShop</span><span class="token punctuation">(</span><span class="token string">'react进阶'</span><span class="token punctuation">,</span> <span class="token string">'2017'</span><span class="token punctuation">,</span> <span class="token string">'第六版'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> book3 <span class="token operator">=</span> <span class="token function">bookShop</span><span class="token punctuation">(</span><span class="token string">'js设计模式'</span><span class="token punctuation">,</span> <span class="token string">'2015'</span><span class="token punctuation">,</span> <span class="token string">'第一版'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book2<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>book3<span class="token punctuation">)</span>
</code></pre></div><h4 id="b-工厂方法模式"><a href="#b-工厂方法模式" class="header-anchor">#</a> b.工厂方法模式</h4> <p>工厂方法模式可以理解为升级版的简单工厂模式，是对产品类的抽象，使其创建多类产品的实例。
简单工厂模式是创建同一类的某个产品，而工厂方法模式是创建多类产品的实例。它其实是将多个产品类进行抽象化，可以通过这个工厂对这些类创建相应类的实例。
比如现在，我不想买编程类的书了，我要买科学类或者社会学类的书，那么工厂方法模式的作用就体现出来了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">BookShop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果外部直接调用了BookShop而不是new关键字调用，则返回new BookShop调用，否则直接调用</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">BookShop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">this</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> book
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BookShop</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">BookShop</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">Programme</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'JS高级编程'</span><span class="token punctuation">,</span> <span class="token string">'react进阶'</span><span class="token punctuation">,</span> <span class="token string">'js设计模式'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">Science</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">Society</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'aa'</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">,</span> <span class="token string">'cc'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> programme <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BookShop</span><span class="token punctuation">(</span><span class="token string">'programme'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> science <span class="token operator">=</span> <span class="token function">BookShop</span><span class="token punctuation">(</span><span class="token string">'science'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> society <span class="token operator">=</span> <span class="token function">BookShop</span><span class="token punctuation">(</span><span class="token string">'society'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>programme<span class="token punctuation">)</span> <span class="token comment">// books: (3) ['JS高级编程', 'react进阶', 'js设计模式']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>science<span class="token punctuation">)</span> <span class="token comment">// books: (3) ['a', 'b', 'c']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>society<span class="token punctuation">)</span> <span class="token comment">// books: (3) ['aa', 'bb', 'cc']</span>
</code></pre></div><p>注意：这种方法重写了prototype，所以后续只能往里面增加，不能直接修改prototype。</p> <h4 id="c-抽象工厂模式"><a href="#c-抽象工厂模式" class="header-anchor">#</a> c.抽象工厂模式</h4> <p>抽象工厂模式是对类的工厂的抽象，用于创建不同的类，而不是创建类的实例。</p> <p>首先创建这个工厂以及所属其的种类：
该工厂可用于生产（Animals，Fruits， Books，Peoples）等类</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 工厂接收两个参数分别是产品子类和产品类</span>
<span class="token keyword">const</span> <span class="token function-variable function">Factorys</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果产品类在这个工厂中存在，就利用寄生继承方式，让产品子类继承产品类中的所有属性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Factorys<span class="token punctuation">[</span>superType<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token function-variable function">F</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Factorys</span><span class="token punctuation">[</span>superType<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      subType<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType
      subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'没有找到'</span> <span class="token operator">+</span> superType <span class="token operator">+</span> <span class="token string">'抽象类'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 以下均为产品类</span>
  <span class="token comment">// Animals产品类</span>
  Factorys<span class="token punctuation">.</span><span class="token function-variable function">Animals</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'Animals'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 直接访问方法抛出错误，之所以这样做，是为了不让外部在没重写子类方法之前访问这些方法</span>
  <span class="token comment">// 需通过继承产品类之后重写这个方法才能访问</span>
  Factorys<span class="token punctuation">.</span><span class="token class-name">Animals</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请先重写子类'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Fruits产品类</span>
  Factorys<span class="token punctuation">.</span><span class="token function-variable function">Fruits</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'Fruits'</span>
  <span class="token punctuation">}</span>
  Factorys<span class="token punctuation">.</span><span class="token class-name">Fruits</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请先重写子类'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Books产品类</span>
  Factorys<span class="token punctuation">.</span><span class="token function-variable function">Books</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'Books'</span>
  <span class="token punctuation">}</span>
  Factorys<span class="token punctuation">.</span><span class="token class-name">Books</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请先重写子类'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Peoples产品类</span>
  Factorys<span class="token punctuation">.</span><span class="token function-variable function">Peoples</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'Peoples'</span>
  <span class="token punctuation">}</span>
  Factorys<span class="token punctuation">.</span><span class="token class-name">Peoples</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getInfo</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'请先重写子类getInfo方法'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>工厂以及产品类创建完成了，那么我们还需要一些产品子类，产品子类是针对产品类的，它是继承于某个产品类，拥有该产品类的所有属性和方法。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 动物产品子类</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Animals</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token punctuation">}</span>
  <span class="token comment">// 工厂开始生产</span>
  <span class="token function">Factorys</span><span class="token punctuation">(</span>Animals<span class="token punctuation">,</span> <span class="token string">'Animals'</span><span class="token punctuation">)</span>
  <span class="token comment">// 生产后重新标价，即重写价格方法，使可以访问</span>
  <span class="token class-name">Animals</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
   <span class="token comment">// 水果产品子类</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Fruits</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token punctuation">}</span>
  <span class="token function">Factorys</span><span class="token punctuation">(</span>Fruits<span class="token punctuation">,</span> <span class="token string">'Fruits'</span><span class="token punctuation">)</span>
  <span class="token class-name">Fruits</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price
  <span class="token punctuation">}</span>
   <span class="token comment">// 人物产品子类</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Peoples</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token punctuation">}</span>
  <span class="token function">Factorys</span><span class="token punctuation">(</span>Peoples<span class="token punctuation">,</span> <span class="token string">'Peoples'</span><span class="token punctuation">)</span>
  <span class="token class-name">Peoples</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price
  <span class="token punctuation">}</span>
   <span class="token comment">// 书籍产品子类</span>
  <span class="token keyword">const</span> <span class="token function-variable function">Books</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
  <span class="token punctuation">}</span>
  <span class="token function">Factorys</span><span class="token punctuation">(</span>Books<span class="token punctuation">,</span> <span class="token string">'Books'</span><span class="token punctuation">)</span>
  <span class="token class-name">Books</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>price
  <span class="token punctuation">}</span>
  
  <span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animals</span><span class="token punctuation">(</span><span class="token string">'小狗'</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价钱：'</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，类型：'</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token keyword">const</span> tomato <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fruits</span><span class="token punctuation">(</span><span class="token string">'西红柿'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价钱：'</span> <span class="token operator">+</span> tomato<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，类型：'</span> <span class="token operator">+</span> tomato<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token keyword">const</span> martian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Peoples</span><span class="token punctuation">(</span><span class="token string">'火星人'</span><span class="token punctuation">,</span> <span class="token number">6989</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价钱：'</span> <span class="token operator">+</span> martian<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，类型：'</span> <span class="token operator">+</span> martian<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Books</span><span class="token punctuation">(</span><span class="token string">'js设计模式'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'价钱：'</span> <span class="token operator">+</span> book<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'，类型：'</span> <span class="token operator">+</span> book<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
</code></pre></div><h4 id="d-总结"><a href="#d-总结" class="header-anchor">#</a> d.总结</h4> <p>简单工厂模式是创建某一种类的实例，是针对一个类的实例创建，而工厂方法模式是多个类创建实例。
简单工厂模式与工厂方法模式只是创建实例，而并不知道它是什么类，但是抽象工厂模式创建了类之后，类的实例会知道自己属于什么类，这也是抽象工厂模式的一大优点。</p> <h3 id="_4-原型模式"><a href="#_4-原型模式" class="header-anchor">#</a> 4.原型模式</h3> <p>定义：用原型实例指向创建对象的类，使用于创建新的对象的类共享原型对象的属性以及方法。</p> <p>在原型模式下，当我们想要创建一个对象时，会先找到一个对象作为原型，然后通过克隆原型的方式来创建出一个与原型一样（共享一套数据/方法）的对象。在 JavaScript 里，Object.create方法就是原型模式的天然实现——准确地说，只要我们还在借助Prototype来实现对象的创建和原型的继承，那么我们就是在应用原型模式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个Dog构造函数</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>

<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'肉骨头真好吃'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'肉骨头真好玩'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用Dog构造函数创建dog实例</span>
<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'旺财'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">//111 Dog { eat: [Function], play: [Function] }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">,</span> <span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Dog<span class="token punctuation">)</span>
<span class="token comment">//222 true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">,</span> dog<span class="token punctuation">)</span>
<span class="token comment">//333 Dog { name: '旺财', age: 3 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">444</span><span class="token punctuation">,</span> dog<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span>
<span class="token number">444</span> Dog <span class="token punctuation">{</span> eat<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span> play<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre></div><p>可见原型编程范式的核心思想就是利用实例来描述对象，用实例作为定义对象和继承的基础。在 JavaScript 中，原型编程范式的体现就是基于原型链的继承。这其中，对原型、原型链的理解是关键。</p> <p>浅析一下原型和原型链：</p> <h4 id="a-原型"><a href="#a-原型" class="header-anchor">#</a> (a) 原型</h4> <p>在 JavaScript 中，每个构造函数都拥有一个prototype属性，它指向构造函数的原型对象，这个原型对象中有一个 construtor 属性指回构造函数；每个实例都有一个__proto__属性，当我们使用构造函数去创建实例时，实例的__proto__属性就会指向构造函数的原型对象。
比如如上这段代码里的几个实体之间就存在着这样的关系：</p> <img src="/helloyifee.github.io/img/proto1.png"> <h4 id="b-原型链"><a href="#b-原型链" class="header-anchor">#</a> b) 原型链</h4> <p>现在我在上面那段代码的基础上，进行两个方法调用:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 输出&quot;肉骨头真好吃&quot;</span>
dog<span class="token punctuation">.</span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment">// 输出&quot;[object Object]&quot;</span>
dog<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>明明没有在 dog 实例里手动定义 eat 方法和 toString 方法，它们还是被成功地调用了。这是因为当我试图访问一个 JavaScript 实例的属性/方法时，它首先搜索这个实例本身；当发现实例没有定义对应的属性/方法时，它会转而去搜索实例的原型对象；如果原型对象中也搜索不到，它就去搜索原型对象的原型对象，这个搜索的轨迹，就叫做原型链。</p> <p>以我们的 eat 方法和 toString 方法的调用过程为例，它的搜索过程就是这样子的：</p> <img src="/helloyifee.github.io/img/proto2.png"> <p>上面这些彼此相连的prototype，就组成了一个原型链。 注： 几乎所有 JavaScript 中的对象都是位于原型链顶端的 Object 的实例，除了Object.prototype（当然，如果我们手动用Object.create(null)创建一个没有任何原型的对象，那它也不是 Object 的实例）。</p> <h3 id="_5-观察者模式"><a href="#_5-观察者模式" class="header-anchor">#</a> 5.观察者模式</h3> <p>定义了一种一对多的关系, 所有观察对象同时监听某一主题对象,当主题对象状态发生变化时就会通知所有观察者对象,使得他们能够自动更新自己.</p> <p>观察者模式是非常经典的设计模式, vue/react等各种框架，类库中均有使用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">addSub</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subArr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subArr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subArr <span class="token operator">||</span> subArr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> subArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> fn <span class="token operator">=</span> subArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
      <span class="token function">fn</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">unSub</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subArr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>subArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>subs<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> subArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> _fn <span class="token operator">=</span> subArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_fn <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          subArr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token comment">// 订阅</span>
<span class="token keyword">let</span> subA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'订阅者收到信息: '</span> <span class="token operator">+</span> message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
subA<span class="token punctuation">.</span><span class="token function">addSub</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span>

<span class="token comment">// 发布</span>
subA<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'我是xxx'</span><span class="token punctuation">)</span>   <span class="token comment">// A收到信息: --&gt; 我是xxx</span>
</code></pre></div><h4 id="a-观察者模式在redux中的应用"><a href="#a-观察者模式在redux中的应用" class="header-anchor">#</a> a) 观察者模式在redux中的应用：</h4> <p>redux推崇单一数据源，即一个web应用状态只有一个数据来源。以一种比较清晰的方式去维护应用的状态。这其实也和react的单向数据流吻合。
关键概念：</p> <blockquote><ol><li>store提供数据的get钩子（store.getState）,不直接提供数据的set，所以必须通过dispatch（action）来set数据。</li></ol></blockquote> <blockquote><ol start="2"><li>利用观察者模式（sub/ pub）连接model和view的中间对象。</li></ol></blockquote> <p>model层通过调用store.subscribe订阅视图更新事件（setstate），该事件会在数据改变之后被调用。对应sub。
view层通过调用store.dispatch方法进行发布，触发reducer改变model。对应pub。
简化如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducers</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> subList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 注册事件列表</span>
    <span class="token keyword">let</span>  currentState <span class="token operator">=</span> initState <span class="token operator">=</span> <span class="token function">reducers</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 初始化initState</span>
    
    <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">fun</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// sub 订阅</span>
        subList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// pub 发布</span>
        currentState <span class="token operator">=</span> <span class="token function">reducers</span><span class="token punctuation">(</span>initState<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
        subList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将事先订阅注册的事件遍历执行。</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// state的get钩子，返回目前的state</span>
        <span class="token keyword">return</span> currentState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> suscribe<span class="token punctuation">,</span> getState <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> store<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-策略模式"><a href="#_6-策略模式" class="header-anchor">#</a> 6.策略模式</h3> <p>定义 : 要实现某一个功能，有多种方案可以选择。我们定义策略，把它们一个个封装起来，并且使它们可以相互转换。
作用：1.避免大量冗余的代码判断,比如if else等。2.降低了使用成本以及不同算法之间的耦合</p> <h4 id="a-未使用策略模式"><a href="#a-未使用策略模式" class="header-anchor">#</a> a) 未使用策略模式</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">checkInfo</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>role <span class="token operator">!==</span> <span class="token string">'admin'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'不是管理员用户'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>age <span class="token operator">&lt;</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'您还未成年！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>time <span class="token operator">!==</span> <span class="token string">'10'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'不是指定时间！'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>type <span class="token operator">!==</span> <span class="token string">'eat melons'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'不是吃瓜群众'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这段代码的问题 ：
● checkInfo 函数会爆炸
● 策略项无法复用
● 违反开闭原则</p> <h4 id="b-使用策略模式"><a href="#b-使用策略模式" class="header-anchor">#</a> b) 使用策略模式</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 维护权限列表</span>
<span class="token keyword">const</span> timeList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'11'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 策略</span>
<span class="token keyword">var</span> strategies <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">checkRole</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token operator">===</span> <span class="token string">'admin'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">checkAge</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">checkTime</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jobList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">checkEatType</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token operator">===</span> <span class="token string">'eat melons'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>验证:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 校验规则</span>
<span class="token keyword">var</span> <span class="token function-variable function">Validator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">// 添加策略事件</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> method</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> strategies<span class="token punctuation">[</span>method<span class="token punctuation">]</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 检查</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> valiFn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token function">valiFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 开始检查</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-装饰器模式"><a href="#_7-装饰器模式" class="header-anchor">#</a> 7.装饰器模式</h3> <p>定义：是为了给一个函数赋能，增强它的某种能力，它能动态的添加对象的行为。</p> <p>装饰器模式在前端中的应用：
装饰器模式在前端中的应用比较常见的就是hoc 高阶组件模式了，这也是 React 比较常用的一种包装强化模式之一 。高阶函数是接收一个函数，返回一个函数。而所谓高阶组件，就是接收一个组件，返回一个组件，返回的组件是根据需要对原始组件的强化。</p> <blockquote><p>hoc 的实现有两种方式，属性代理 和 反向继承。</p></blockquote> <h4 id="a-属性代理"><a href="#a-属性代理" class="header-anchor">#</a> a) 属性代理</h4> <p>所谓正向属性代理，就是用组件包裹一层代理组件，在代理组件上，我们可以做一些，对源组件的代理操作。 我们可以理解为父子组件关系，父组件对子组件进行一系列强化操作。而 hoc 本身就是返回强化子组件的父组件。</p> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token constant">HOC</span>
<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello<span class="token punctuation">,</span>world  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//HOC 本质是一个函数，传入 Component ，也就是原始组件本身</span>
<span class="token keyword">function</span> <span class="token function">Hoc</span> <span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//返回一个新的包装的组件 Wrap ，我们可以在 Wrap 中做一些强化原始组件的事。</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Wrap</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token comment">//---------</span>
        <span class="token comment">// 强化操作</span>
        <span class="token comment">//---------</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//Wrap 中挂载原始组件本身 Component。</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看出属性代理特点：
1.同样适用于 class 声明组件，和 function 声明的组件。
2.可以嵌套使用，多个 hoc 是可以嵌套使用的，而且一般不会限制包装HOC的先后顺序。
3.可以完全隔离业务组件的渲染,相比反向继承，属性代理这种模式。可以完全控制业务组件渲染与否，可以避免反向继承带来一些副作用，比如生命周期的执行。
4.正常属性代理可以和业务组件低耦合，零耦合，对于条件渲染和 props 属性增强,只负责控制子组件渲染和传递额外的 props 就可以，所以无须知道，业务组件做了些什么。所以正向属性代理，更适合做一些开源项目的 hoc ，目前开源的 HOC 基本都是通过这个模式实现的。</p> <h4 id="b-反向继承"><a href="#b-反向继承" class="header-anchor">#</a> b) 反向继承</h4> <p>反向继承和属性代理有一定的区别，在于包装后的组件继承了业务组件本身，所以我们我无须再去实例化我们的业务组件。 当前高阶组件就是继承后，加强型的业务组件。这种方式类似于组件的强化，所以你必须要知道当前继承的组件的状态，内部做了些什么？</p> <div class="language-js extra-class"><pre class="language-js"><code>@<span class="token constant">HOC</span>
<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello<span class="token punctuation">,</span>world  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token constant">HOC</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">wrapComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span> <span class="token comment">/* 直接继承需要包装的组件 */</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Index
</code></pre></div><p>可以看出反向继承特点：
1.方便获取组件内部状态，比如state，props ,生命周期,绑定的事件函数等
2.es6继承可以良好继承静态属性。我们无须对静态属性和方法进行额外的处理。</p> <h3 id="_8-代理模式"><a href="#_8-代理模式" class="header-anchor">#</a> 8.代理模式</h3> <p>定义：一个对象通过某种代理方式来控制对另一个对象的访问.
作用</p> <p>● 远程代理(一个对象对另一个对象的局部代理)</p> <p>● 虚拟代理(对于需要创建开销很大的对象如渲染网页大图时可以先用缩略图代替真图)</p> <p>● 安全代理(保护真实对象的访问权限)</p> <p>● 缓存代理(一些开销比较大的运算提供暂时的存储，下次运算时，如果传递进来的参数跟之前相同，
则可以直接返回前面存储的运算结果)</p> <h4 id="a-代理模式在前端的应用-计算缓存器"><a href="#a-代理模式在前端的应用-计算缓存器" class="header-anchor">#</a> a) 代理模式在前端的应用-计算缓存器：</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
<span class="token comment">// 缓存代理</span>
<span class="token keyword">let</span> proxySum <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>args <span class="token keyword">in</span> cache<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> cache<span class="token punctuation">[</span>args<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      cache<span class="token punctuation">[</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
      <span class="token keyword">return</span> cache<span class="token punctuation">[</span>args<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_9-外观模式"><a href="#_9-外观模式" class="header-anchor">#</a> 9.外观模式</h3> <p>定义：为子系统中的一组接口提供一个一致的表现,使得子系统更容易使用而不需要关注内部复杂而繁琐的细节。
作用：对接口和调用者进行了一定的解耦，创造经典的三层结构MVC，在开发阶段减少不同子系统之间的依赖和耦合,方便各个子系统的迭代和扩展。</p> <h4 id="a-外观模式在前端的应用"><a href="#a-外观模式在前端的应用" class="header-anchor">#</a> a) 外观模式在前端的应用：</h4> <p>我们可以使用外观模式来设计兼容不同浏览器的事件绑定的方法以及其他需要统一实现接口的方法或者抽象类.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 对于支持dom2级事件处理程序</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span><span class="token punctuation">{</span>
      dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 对于IE9一下的ie浏览器</span>
      dom<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span><span class="token operator">+</span>type<span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
      dom<span class="token punctuation">[</span><span class="token string">'on'</span><span class="token operator">+</span> type<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-迭代器模式"><a href="#_10-迭代器模式" class="header-anchor">#</a> 10.迭代器模式</h3> <p>定义：提供一种方法顺序访问一个聚合对象中的各个元素,使用者并不需要关心该方法的内部表示.
作用：为遍历不同集合提供统一接口，保护原集合但又提供外部访问内部元素的方式</p> <h4 id="a-应用"><a href="#a-应用" class="header-anchor">#</a> a) 应用：</h4> <p>封装的一个遍历函数来让大家更加理解迭代器模式的使用,该方法不仅可以遍历数组和字符串,还能遍历对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_each</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> k<span class="token punctuation">,</span> el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 判断数据类型</span>
  <span class="token keyword">function</span> <span class="token function">checkType</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 数组或者字符串</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token string">'String'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token function">checkType</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> el<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span>el<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">checkType</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'Object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span>el<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参考：</p> <p>1.JavaScript设计模式</p> <p>2.vuex部分源码</p> <p>3.redux部分源码</p> <p>4.<a href="https://juejin.cn/book/6844733790204461070/section/6844733790246404109" target="_blank" rel="noopener noreferrer">JavaScript 设计模式核⼼原理与应⽤实践<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="gitalk-container"><div id="gitalk-container"></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/yifeewang/vuepress-theme-vdoing/edit/master/docs/01.前端/3.学习笔记/05.javaScript常用设计模式.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/04/25, 15:06:11</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/helloyifee.github.io/pages/ca9b86/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">软链接和硬链接到底有啥作用和区别</div></a> <a href="/helloyifee.github.io/pages/bd5791/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">原生拖拽实现</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/helloyifee.github.io/pages/ca9b86/" class="prev">软链接和硬链接到底有啥作用和区别</a></span> <span class="next"><a href="/helloyifee.github.io/pages/bd5791/">原生拖拽实现</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/helloyifee.github.io/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/helloyifee.github.io/pages/84f782/"><div>LRU算法实现</div></a> <span>05-01</span></dt></dl><dl><dd>02</dd> <dt><a href="/helloyifee.github.io/pages/3b1614/"><div>忽然而已</div></a> <span>04-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/helloyifee.github.io/pages/51f5cf/"><div>vueRouter原理</div></a> <span>04-05</span></dt></dl> <dl><dd></dd> <dt><a href="/helloyifee.github.io/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:896678534@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/yifeewang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>王路飞 | <a href="https://github.com/yifeewang" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/helloyifee.github.io/assets/js/app.e3066f50.js" defer></script><script src="/helloyifee.github.io/assets/js/2.6d47b19a.js" defer></script><script src="/helloyifee.github.io/assets/js/34.93d4485b.js" defer></script><script src="/helloyifee.github.io/assets/js/7.c0469e4d.js" defer></script>
  </body>
</html>
